<div class="container">
  <section class="filters">
    <form class="form" [formGroup]="ventasFormGroup">
      <div class="cliente">
        <mat-checkbox class="enabled" formControlName="clienteEnabled"></mat-checkbox>

        <mat-form-field appearance="outline">
          <mat-label>Nombre de cliente</mat-label>
          <input type="text" matInput placeholder="Ingrese el filtro a aplicar sobre la data cargada..." formControlName="clienteInput"/>
        </mat-form-field>

        <button type="button" mat-flat-button color="primary" (click)="loadSales()" [disabled]="!flagCargaVentas">
          CONSULTAR
        </button>
      </div>
      <div class="date-range-container">
        <mat-checkbox class="enabled" formControlName="datesEnabled"></mat-checkbox>
        <div class="date-range">
          <mat-form-field appearance="outline">
            <mat-label>Fecha inicio</mat-label>
            <input
              matInput
              [matDatepicker]="pickerDateFrom"
              (click)="pickerDateFrom.open()"
              formControlName="dateFrom"
              readonly
            />
            <mat-hint>DD/MM/YYYY</mat-hint>
            <mat-datepicker-toggle matIconSuffix [for]="pickerDateFrom"></mat-datepicker-toggle>
            <mat-datepicker #pickerDateFrom></mat-datepicker>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Fecha fin</mat-label>
            <input
              matInput
              [matDatepicker]="pickerDateTo"
              (click)="pickerDateTo.open()"
              formControlName="dateTo"
              readonly
            />
            <mat-hint>DD/MM/YYYY</mat-hint>
            <mat-datepicker-toggle matIconSuffix [for]="pickerDateTo"></mat-datepicker-toggle>
            <mat-datepicker #pickerDateTo></mat-datepicker>
          </mat-form-field>
        </div>
      </div>
    </form>
  </section>
  <section class="table">
    <table mat-table [dataSource]="dataSource" matSort>

       <ng-container matColumnDef="IdVenta">
        <th mat-header-cell *matHeaderCellDef mat-sort-header ="idVenta">Id Venta</th>
        <td mat-cell *matCellDef="let element">{{ element.idVenta }}</td>
      </ng-container>

      <ng-container matColumnDef="NumeroOperacion">
        <th mat-header-cell *matHeaderCellDef mat-sort-header ="numeroOperacion">Nro. Operación</th>
        <td mat-cell *matCellDef="let element">{{ element.numeroOperacion }}</td>
      </ng-container>

      <ng-container matColumnDef="Cliente">
        <th mat-header-cell *matHeaderCellDef mat-sort-header = "nombreCompletoCliente">Cliente</th>
        <td mat-cell *matCellDef="let element">{{ element.nombreCompletoCliente }}</td>
      </ng-container>

      <ng-container matColumnDef="FechaVenta">
        <th mat-header-cell *matHeaderCellDef mat-sort-header = "fechaVenta">Fecha Venta</th>
        <td mat-cell *matCellDef="let element">{{ element.fechaVenta }}</td>
      </ng-container>

      <ng-container matColumnDef="HoraVenta">
        <th mat-header-cell *matHeaderCellDef mat-sort-header = "horaVenta">Hora Venta</th>
        <td mat-cell *matCellDef="let element">{{ element.horaVenta }}</td>
      </ng-container>

       <ng-container matColumnDef="MontoTotal">
        <th mat-header-cell *matHeaderCellDef mat-sort-header ="montoTotalVenta">Monto Total</th>
        <td mat-cell *matCellDef="let element">{{ element.montoTotalVenta.toFixed(2)}}</td>
      </ng-container>

      <ng-container matColumnDef="CantidadTotal">
        <th mat-header-cell *matHeaderCellDef mat-sort-header = "cantidadTotalArticulos">Total Artículos</th>
        <td mat-cell *matCellDef="let element">{{ element.cantidadTotalArticulos.toFixed(2)}}</td>
      </ng-container>

       <ng-container matColumnDef="Voucher">
        <th mat-header-cell *matHeaderCellDef>Voucher</th>
        <td mat-cell *matCellDef="let element">
          <button matButton class="primary" (click)="viewVoucher(element.idVenta)">Voucher</button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

      <!-- Row shown when there is no matching data. -->
      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell" colspan="7">
          <div class="empty-table">
            <span class="text">No hay datos que coincidan con los filtros</span>
          </div>
        </td>
      </tr>
    </table>
    <mat-paginator [pageSizeOptions]="[10, 25, 50, 100]"></mat-paginator>
  </section>
</div>
